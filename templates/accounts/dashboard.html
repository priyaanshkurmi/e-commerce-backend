<h1>Your Dashboard</h1>

<div style="display: flex; gap: 20px; margin: 20px 0;">
  <a href="{% url 'profile' %}" style="padding: 10px 20px; background-color: #3498db; color: white; text-decoration: none; border-radius: 4px;">
    Edit Profile
  </a>
  <a href="{% url 'order_history' %}" style="padding: 10px 20px; background-color: #2ecc71; color: white; text-decoration: none; border-radius: 4px;">
    View All Orders
  </a>
  <a href="/" style="padding: 10px 20px; background-color: #95a5a6; color: white; text-decoration: none; border-radius: 4px;">
    Continue Shopping
  </a>
</div>

<hr>

<h2>Welcome, {{ user.get_full_name|default:user.username }}!</h2>

<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 20px 0;">
  <div style="border: 1px solid #ddd; padding: 15px; border-radius: 5px; background-color: #ecf0f1;">
    <h3 style="margin-top: 0; color: #3498db;">{{ total_orders }}</h3>
    <p style="margin: 0;">Total Orders</p>
  </div>
  
  <div style="border: 1px solid #ddd; padding: 15px; border-radius: 5px; background-color: #d5f4e6;">
    <h3 style="margin-top: 0; color: #27ae60;">{{ paid_orders }}</h3>
    <p style="margin: 0;">Paid Orders</p>
  </div>
  
  <div style="border: 1px solid #ddd; padding: 15px; border-radius: 5px; background-color: #fef5e7;">
    <h3 style="margin-top: 0; color: #f39c12;">{{ pending_orders }}</h3>
    <p style="margin: 0;">Pending Orders</p>
  </div>
</div>

<div style="border: 1px solid #ddd; padding: 20px; border-radius: 5px; background-color: #f9f9f9; margin: 30px 0;">
  <h3 style="margin-top: 0;">ğŸ“ Shipping Address</h3>
  
  {% if address %}
    <div style="background-color: #f0f8ff; padding: 15px; border-radius: 4px; border-left: 4px solid #3498db;">
      <p style="margin: 0 0 10px 0;"><strong>{{ address.full_name }}</strong></p>
      <p style="margin: 5px 0;">{{ address.address_line_1 }}{% if address.address_line_2 %}, {{ address.address_line_2 }}{% endif %}</p>
      <p style="margin: 5px 0;">{{ address.city }}, {{ address.state }} - {{ address.postal_code }}</p>
      <p style="margin: 5px 0;">{{ address.country }} | Phone: {{ address.phone }}</p>
      <a href="{% url 'manage_address' %}" style="margin-top: 10px; display: inline-block; color: #3498db; text-decoration: none; font-size: 14px;">Edit Address â†’</a>
    </div>
  {% else %}
    <p style="color: #7f8c8d; margin: 0 0 15px 0;">No address on file. Add one for faster checkout.</p>
    <a href="{% url 'manage_address' %}" style="padding: 8px 15px; background-color: #2ecc71; color: white; text-decoration: none; border-radius: 4px; display: inline-block;">
      + Add Address
    </a>
  {% endif %}
</div>

<h3>Recent Orders</h3>

{% if orders %}
  <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
    <tr style="border-bottom: 2px solid #ddd; background-color: #f9f9f9;">
      <th style="text-align: left; padding: 12px;">Order ID</th>
      <th style="text-align: center; padding: 12px;">Date</th>
      <th style="text-align: center; padding: 12px;">Items</th>
      <th style="text-align: right; padding: 12px;">Amount</th>
      <th style="text-align: center; padding: 12px;">Status</th>
      <th style="text-align: center; padding: 12px;">Action</th>
    </tr>

    {% for order in orders|slice:":5" %}
    <tr style="border-bottom: 1px solid #eee;">
      <td style="padding: 12px;"><strong>#{{ order.id }}</strong></td>
      <td style="text-align: center; padding: 12px;">{{ order.created_at|date:"M d, Y" }}</td>
      <td style="text-align: center; padding: 12px;">{{ order.items.count }}</td>
      <td style="text-align: right; padding: 12px;">â‚¹{{ order.total_price }}</td>
      <td style="text-align: center; padding: 12px;">
        {% if order.status == "paid" %}
          <span style="background-color: #d5f4e6; color: #27ae60; padding: 5px 10px; border-radius: 3px; font-weight: bold;">{{ order.get_status_display }}</span>
        {% elif order.status == "pending" %}
          <span style="background-color: #fef5e7; color: #f39c12; padding: 5px 10px; border-radius: 3px; font-weight: bold;">{{ order.get_status_display }}</span>
        {% else %}
          <span style="background-color: #ecf0f1; color: #34495e; padding: 5px 10px; border-radius: 3px; font-weight: bold;">{{ order.get_status_display }}</span>
        {% endif %}
      </td>
      <td style="text-align: center; padding: 12px;">
        <a href="{% url 'order_detail' order.id %}" style="color: #3498db; text-decoration: none;">View</a>
      </td>
    </tr>
    {% endfor %}
  </table>

  {% if orders.count > 5 %}
    <p style="text-align: center;">
      <a href="{% url 'order_history' %}" style="color: #3498db; text-decoration: none;">View all {{ orders.count }} orders â†’</a>
    </p>
  {% endif %}
{% else %}
  <div style="border: 1px solid #ddd; padding: 20px; border-radius: 5px; background-color: #f9f9f9; text-align: center;">
    <p>You haven't placed any orders yet.</p>
    <a href="/" style="padding: 10px 20px; background-color: #3498db; color: white; text-decoration: none; border-radius: 4px; display: inline-block; margin-top: 10px;">
      Start Shopping
    </a>
  </div>
{% endif %}

<hr style="margin-top: 40px;">

<p style="color: #7f8c8d; font-size: 14px;">
  <strong>Account Info:</strong> Email: {{ user.email }} | Username: {{ user.username }}
</p>
