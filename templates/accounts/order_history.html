<h1>Order History</h1>

<a href="{% url 'dashboard' %}" style="padding: 8px 15px; background-color: #95a5a6; color: white; text-decoration: none; border-radius: 4px; display: inline-block; margin-bottom: 20px;">
  ← Back to Dashboard
</a>

<hr>

{% if orders %}
  <div style="margin: 20px 0;">
    <p><strong>Total Orders:</strong> {{ orders.count }}</p>
  </div>

  <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
    <tr style="border-bottom: 2px solid #ddd; background-color: #f9f9f9;">
      <th style="text-align: left; padding: 12px;">Order ID</th>
      <th style="text-align: center; padding: 12px;">Date</th>
      <th style="text-align: center; padding: 12px;">Items</th>
      <th style="text-align: right; padding: 12px;">Amount</th>
      <th style="text-align: center; padding: 12px;">Status</th>
      <th style="text-align: center; padding: 12px;">Action</th>
    </tr>

    {% for order in orders %}
    <tr style="border-bottom: 1px solid #eee;">
      <td style="padding: 12px;"><strong>#{{ order.id }}</strong></td>
      <td style="text-align: center; padding: 12px;">{{ order.created_at|date:"M d, Y H:i" }}</td>
      <td style="text-align: center; padding: 12px;">{{ order.items.count }}</td>
      <td style="text-align: right; padding: 12px;">₹{{ order.total_price }}</td>
      <td style="text-align: center; padding: 12px;">
        {% if order.status == "paid" %}
          <span style="background-color: #d5f4e6; color: #27ae60; padding: 5px 10px; border-radius: 3px; font-weight: bold;">{{ order.get_status_display }}</span>
        {% elif order.status == "pending" %}
          <span style="background-color: #fef5e7; color: #f39c12; padding: 5px 10px; border-radius: 3px; font-weight: bold;">{{ order.get_status_display }}</span>
        {% elif order.status == "shipped" %}
          <span style="background-color: #d6eaf8; color: #2980b9; padding: 5px 10px; border-radius: 3px; font-weight: bold;">{{ order.get_status_display }}</span>
        {% elif order.status == "delivered" %}
          <span style="background-color: #d5f4e6; color: #27ae60; padding: 5px 10px; border-radius: 3px; font-weight: bold;">✓ {{ order.get_status_display }}</span>
        {% else %}
          <span style="background-color: #fadbd8; color: #c0392b; padding: 5px 10px; border-radius: 3px; font-weight: bold;">{{ order.get_status_display }}</span>
        {% endif %}
      </td>
      <td style="text-align: center; padding: 12px;">
        <a href="{% url 'order_detail' order.id %}" style="color: #3498db; text-decoration: none; font-weight: bold;">View Details</a>
      </td>
    </tr>
    {% endfor %}
  </table>
{% else %}
  <div style="border: 1px solid #ddd; padding: 20px; border-radius: 5px; background-color: #f9f9f9; text-align: center;">
    <p>No orders found.</p>
    <a href="/" style="padding: 10px 20px; background-color: #3498db; color: white; text-decoration: none; border-radius: 4px; display: inline-block; margin-top: 10px;">
      Start Shopping
    </a>
  </div>
{% endif %}
